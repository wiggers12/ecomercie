<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meu Cat√°logo Digital</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2980b9; --secondary: #16a085; --dark1: #0d0d0d;
      --dark2: #1a1a1a; --dark3: #2c2c2c; --text: #ffffff; --accent: #1abc9c;
    }
    body { margin:0; font-family:'Poppins',sans-serif; background:var(--dark1); color:var(--text); }
    header { background:linear-gradient(90deg, var(--primary), var(--secondary)); padding:15px; font-size:22px; font-weight:700; text-align:center; }
    nav { display:flex; justify-content:center; flex-wrap:wrap; background:#1e1e1e; padding:5px 0; }
    nav button { background:var(--primary); border:none; margin:5px; padding:10px 15px; border-radius:8px; color:var(--text); font-weight:bold; cursor:pointer; transition: all 0.2s; }
    nav button:hover { background:var(--secondary); transform: translateY(-2px); }
    section { display:none; padding:20px; max-width:1200px; margin:auto; }
    h2 { color:var(--accent); margin:15px 0; border-bottom: 2px solid var(--dark3); padding-bottom: 10px;}
    input, select { padding:12px; border:none; border-radius:6px; width:100%; box-sizing: border-box; margin:8px 0; background:var(--dark3); color:var(--text); font-size:16px; }
    .btn { background:var(--primary); display:block; width:100%; text-align:center; padding:12px; margin:15px 0; border-radius:6px; cursor:pointer; border:none; color:var(--text); font-weight:bold; font-size:16px; transition: background 0.2s; }
    .btn:hover { background:var(--secondary); }
    .list { background:var(--dark2); border-radius:8px; padding:15px; margin-top:10px; }
    .list div { padding:10px; border-bottom:1px solid #333; }
    .list div:last-child { border-bottom: none; }
    .list small { color: #aaa; }

    /* Estilos Cat√°logo de Produtos */
    #catalogoContainer { display:grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px; }
    .prod-card { background:var(--dark2); border-radius:10px; overflow:hidden; text-align:center; transition:transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.5); display: flex; flex-direction: column;}
    .prod-card:hover { transform:scale(1.03); box-shadow: 0 6px 20px rgba(0,0,0,0.7); }
    .prod-card img { width:100%; height:180px; object-fit:cover; background-color: #555;}
    .prod-card-info { padding:15px; flex-grow: 1; }
    .prod-card-info h4 { margin:5px 0; font-size: 18px; }
    .prod-card-info p { margin:10px 0; color:var(--accent); font-weight:bold; font-size:20px; }
    .prod-card-actions { padding:0 15px 15px 15px; }
    .prod-card-actions .btn { font-size:14px; padding:10px; margin:0; }

    /* Modal */
    .modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background:rgba(0,0,0,0.85); backdrop-filter: blur(5px); }
    .modal-content { background:var(--dark2); margin:10% auto; padding:20px; border-radius:10px; max-width:700px; animation: slide-down 0.3s ease-out; }
    @keyframes slide-down { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .modal-header { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--accent); }
    .modal-header h2 { margin-top:0; }
    .close-btn { color:#aaa; font-size:32px; font-weight:bold; cursor:pointer; }
    .modal-body iframe { width:100%; height:350px; border:none; border-radius:8px; margin-top:15px; }
  </style>
</head>
<body>
<header> Meu Cat√°logo Digital </header>
<nav>
  <button onclick="showTab('catalogo')">üõçÔ∏è Cat√°logo</button>
  <button onclick="showTab('clientes')">üë• Clientes</button>
  <button onclick="showTab('admin')">‚öôÔ∏è Admin</button>
</nav>

<section id="catalogo">
  <h2>Nossos Produtos</h2>
  <div id="catalogoContainer"></div>
</section>

<section id="clientes">
    <h2>Gest√£o de Clientes</h2>
    <h3>‚ûï Novo Cliente</h3>
    <input type="text" id="cliNome" placeholder="Nome Completo">
    <input type="tel" id="cliTel" placeholder="Telefone (Opcional)">
    <input type="email" id="cliEmail" placeholder="E-mail (Opcional)">
    <button class="btn" onclick="addCliente()">Adicionar Cliente</button>
    <h3>üìã Clientes Cadastrados</h3>
    <div class="list" id="listaClientes"></div>
</section>

<section id="admin">
  <h2>‚öôÔ∏è Painel de Administra√ß√£o</h2>
  <h3>üì¶ Adicionar Novo Produto ao Cat√°logo</h3>
  <input type="text" id="prodNome" placeholder="Nome do Produto">
  <input type="url" id="prodImagem" placeholder="URL da Imagem (Ex: https://site.com/imagem.jpg)">
  <input type="url" id="prodVideo" placeholder="URL do V√≠deo do YouTube (Opcional)">
  <input type="number" id="prodValor" placeholder="Pre√ßo do Produto (Ex: 129.90)">
  <button class="btn" onclick="addProduto()">‚ûï Adicionar Produto</button>
  
  <h3>üìã Produtos no Cat√°logo</h3>
  <div class="list" id="listaAdminProdutos"></div>
</section>

<div id="productModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="modalTitle"></h2>
      <span class="close-btn" onclick="closeModal()">&times;</span>
    </div>
    <div class="modal-body">
      <p style="font-size:22px; color:var(--accent); font-weight:bold;">Pre√ßo: R$ <span id="modalPrice"></span></p>
      <div id="modalVideoContainer"></div>
    </div>
  </div>
</div>


<script>
// --- BANCO DE DADOS LOCAL (SALVO NO NAVEGADOR) ---
let dados = JSON.parse(localStorage.getItem("catalogoDigital")) || {
  clientes: [
    {id: 1, nome: "Jo√£o da Silva", tel: "51 99999-8888", email: "joao.silva@email.com"}
  ],
  catalogo: [
    {id: 1, nome:"Notebook Ultra Fino", imagemUrl:"https://source.unsplash.com/random/400x300?laptop", videoUrl:"https://www.youtube.com/watch?v=dQw4w9WgXcQ", valor: 4599.90},
    {id: 2, nome:"Fone de Ouvido Bluetooth", imagemUrl:"https://source.unsplash.com/random/400x300?headphones", videoUrl:"", valor: 299.00},
    {id: 3, nome:"Smartwatch Esportivo", imagemUrl:"https://source.unsplash.com/random/400x300?smartwatch", videoUrl:"", valor: 780.50}
  ]
};

// --- FUN√á√ïES GERAIS ---
function save(){ 
  localStorage.setItem("catalogoDigital", JSON.stringify(dados)); 
}
function beep(){ 
  new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg").play(); 
}

// --- NAVEGA√á√ÉO ENTRE ABAS ---
function showTab(tabId){
  document.querySelectorAll("section").forEach(s => s.style.display = "none");
  document.getElementById(tabId).style.display = "block";
  if(tabId === "catalogo") renderCatalogo();
  if(tabId === "clientes") renderClientes();
  if(tabId === "admin") renderAdminListaProdutos();
}

// --- SE√á√ÉO DE CLIENTES ---
function addCliente() {
    const nome = document.getElementById("cliNome").value.trim();
    const tel = document.getElementById("cliTel").value;
    const email = document.getElementById("cliEmail").value;
    if (!nome) { alert("O nome do cliente √© obrigat√≥rio!"); return; }

    dados.clientes.push({ id: Date.now(), nome, tel, email });
    save(); 
    renderClientes(); 
    beep();
    alert("‚úÖ Cliente adicionado com sucesso!");
    document.getElementById("cliNome").value = '';
    document.getElementById("cliTel").value = '';
    document.getElementById("cliEmail").value = '';
}
function renderClientes() {
    let html = "";
    [...dados.clientes].reverse().forEach(c => { // Mostra os mais recentes primeiro
        html += `<div><b>${c.nome}</b><br><small>${c.email || 'Sem e-mail'} | ${c.tel || 'Sem telefone'}</small></div>`;
    });
    document.getElementById("listaClientes").innerHTML = html || "<p>Nenhum cliente cadastrado.</p>";
}

// --- SE√á√ÉO ADMIN (GERENCIAR CAT√ÅLOGO) ---
function addProduto(){
  const nome = document.getElementById("prodNome").value.trim();
  const imagemUrl = document.getElementById("prodImagem").value.trim();
  const videoUrl = document.getElementById("prodVideo").value.trim();
  const valor = parseFloat(document.getElementById("prodValor").value) || 0;

  if(!nome || !imagemUrl || valor <= 0){
    alert("Preencha Nome, URL da Imagem e Pre√ßo do produto!");
    return;
  }
  dados.catalogo.push({id: Date.now(), nome, imagemUrl, videoUrl, valor});
  save();
  renderAdminListaProdutos();
  beep();
  alert("‚úÖ Produto adicionado ao cat√°logo!");
  // Limpa o formul√°rio
  document.getElementById("prodNome").value = '';
  document.getElementById("prodImagem").value = '';
  document.getElementById("prodVideo").value = '';
  document.getElementById("prodValor").value = '';
}
function renderAdminListaProdutos(){
  let html=""; 
  [...dados.catalogo].reverse().forEach(p => {
    html += `<div><b>${p.nome}</b> - R$ ${p.valor.toFixed(2)}</div>`;
  });
  document.getElementById("listaAdminProdutos").innerHTML = html || "<p>Nenhum produto cadastrado.</p>";
}

// --- SE√á√ÉO CAT√ÅLOGO (VISUALIZA√á√ÉO P√öBLICA) ---
function renderCatalogo(){
    const container = document.getElementById("catalogoContainer");
    container.innerHTML = "";
    dados.catalogo.forEach((p, index) => {
        container.innerHTML += `
            <div class="prod-card">
                <img src="${p.imagemUrl}" alt="${p.nome}" onerror="this.src='https://via.placeholder.com/400x300.png?text=Imagem+Inv√°lida'">
                <div class="prod-card-info">
                    <h4>${p.nome}</h4>
                    <p>R$ ${p.valor.toFixed(2)}</p>
                </div>
                <div class="prod-card-actions">
                    <button class="btn" onclick="showProductDetail(${index})">Ver Detalhes</button>
                </div>
            </div>`;
    });
}

// --- MODAL DE DETALHES DO PRODUTO ---
function showProductDetail(index) {
    const produto = dados.catalogo[index];
    document.getElementById("modalTitle").innerText = produto.nome;
    document.getElementById("modalPrice").innerText = produto.valor.toFixed(2);
    
    let videoContainer = document.getElementById("modalVideoContainer");
    if(produto.videoUrl) {
        let embedUrl = convertToEmbedUrl(produto.videoUrl);
        videoContainer.innerHTML = `<iframe src="${embedUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
    } else {
        videoContainer.innerHTML = "<p>Nenhum v√≠deo dispon√≠vel para este produto.</p>";
    }
    document.getElementById("productModal").style.display = "block";
}
function closeModal() {
    document.getElementById("productModal").style.display = "none";
    document.getElementById("modalVideoContainer").innerHTML = ""; // Para o v√≠deo ao fechar
}
function convertToEmbedUrl(url) {
    let videoId = '';
    try {
        if (url.includes("youtu.be/")) {
            videoId = new URL(url).pathname.substring(1);
        } else if (url.includes("watch?v=")) {
            videoId = new URL(url).searchParams.get("v");
        }
    } catch (e) { console.error("URL de v√≠deo inv√°lida:", e); return ''; }
    return videoId ? `https://www.youtube.com/embed/${videoId}` : '';
}
window.onclick = function(event) {
    if (event.target == document.getElementById("productModal")) {
        closeModal();
    }
}

// --- INICIALIZA√á√ÉO ---
showTab("catalogo"); // Come√ßa mostrando a aba do cat√°logo
</script>
</body>
</html>
